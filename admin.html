<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | Event Koi?!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="bg-white shadow-md rounded-lg p-6 mb-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <a href="index.html" class="text-3xl font-bold text-red-700 mb-4 md:mb-0">Event Koi?! [Admin]</a>
                <div class="flex items-center space-x-4">
                    <span class="font-semibold">Welcome, Admin!</span>
                    <button id="logoutBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-4 rounded-lg flex items-center justify-center">
                        <i class="fas fa-sign-out-alt mr-2"></i> Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Admin Section -->
        <section class="bg-white shadow-md rounded-lg p-6">
            <div class="flex flex-col md:flex-row gap-8">
                <!-- Sidebar -->
                <aside class="w-full md:w-1/4">
                    <div class="bg-red-50 rounded-lg p-6 mb-6 text-center md:text-left">
                        <div class="flex flex-col md:flex-row items-center mb-4">
                            <div class="relative w-20 h-20 rounded-full bg-red-200 flex items-center justify-center text-red-600 text-3xl font-bold mr-0 md:mr-4 mb-4 md:mb-0">
                                <span>A</span>
                            </div>
                            <div>
                                <h2 class="text-xl font-semibold">Admin User</h2>
                                <p class="text-gray-600">admin@eventkoi.com</p>
                            </div>
                        </div>
                        <nav class="space-y-2">
                            <button class="w-full text-left p-3 rounded-lg hover:bg-red-100 flex items-center admin-tab-btn active-tab" data-admin-tab="dashboard">
                                <i class="fas fa-tachometer-alt w-6 text-center mr-3 text-red-600"></i> Dashboard
                            </button>
                            <button class="w-full text-left p-3 rounded-lg hover:bg-red-100 flex items-center relative admin-tab-btn" data-admin-tab="approvals">
                                <i class="fas fa-check-circle w-6 text-center mr-3 text-red-600"></i> Event Approvals
                                <span class="notification-badge" id="pending-events-badge">0</span>
                            </button>
                            <button class="w-full text-left p-3 rounded-lg hover:bg-red-100 flex items-center relative admin-tab-btn" data-admin-tab="deletions">
                                <i class="fas fa-trash-alt w-6 text-center mr-3 text-red-600"></i> Deletion Requests
                                <span class="notification-badge" id="pending-deletions-badge">0</span>
                            </button>
                            <button class="w-full text-left p-3 rounded-lg hover:bg-red-100 flex items-center admin-tab-btn" data-admin-tab="users">
                                <i class="fas fa-users w-6 text-center mr-3 text-red-600"></i> User Management
                            </button>
                            <button class="w-full text-left p-3 rounded-lg hover:bg-red-100 flex items-center relative admin-tab-btn" data-admin-tab="reports">
                                <i class="fas fa-flag w-6 text-center mr-3 text-red-600"></i> Reports Panel
                                <span class="notification-badge" id="active-reports-badge">0</span>
                            </button>
                            <button class="w-full text-left p-3 rounded-lg hover:bg-red-100 flex items-center relative admin-tab-btn" data-admin-tab="categories">
                                <i class="fas fa-tags w-6 text-center mr-3 text-red-600"></i> Category Management
                                <span class="notification-badge" id="pending-categories-badge">0</span>
                            </button>
                            <button class="w-full text-left p-3 rounded-lg hover:bg-red-100 flex items-center admin-tab-btn" data-admin-tab="logs">
                                <i class="fas fa-clipboard-list w-6 text-center mr-3 text-red-600"></i> Accountability Log
                            </button>
                        </nav>
                    </div>
                </aside>
                
                <!-- Main Content -->
                <main class="w-full md:w-3/4">
                    <!-- Dashboard Tab -->
                    <div id="dashboard" class="admin-tab-content active">
                        <h2 class="text-2xl font-bold mb-6 text-gray-800">Admin Dashboard</h2>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div id="total-events-card" class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-lg dashboard-card cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-blue-100">Total Events</p>
                                        <p id="total-events" class="text-3xl font-bold">156</p>
                                    </div>
                                    <i class="fas fa-calendar text-4xl text-blue-200"></i>
                                </div>
                            </div>
                            <div id="active-users-card" class="bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-lg dashboard-card cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-green-100">Active Users</p>
                                        <p id="active-users" class="text-3xl font-bold">2,847</p>
                                    </div>
                                    <i class="fas fa-users text-4xl text-green-200"></i>
                                </div>
                            </div>
                            <div id="pending-approvals-card" class="bg-gradient-to-r from-yellow-500 to-yellow-600 text-white p-6 rounded-lg dashboard-card cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-yellow-100">Pending Approvals</p>
                                        <p id="pending-approvals" class="text-3xl font-bold">5</p>
                                    </div>
                                    <i class="fas fa-clock text-4xl text-yellow-200"></i>
                                </div>
                            </div>
                            <div id="active-reports-card" class="bg-gradient-to-r from-red-500 to-red-600 text-white p-6 rounded-lg dashboard-card cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-lg">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-red-100">Active Reports</p>
                                        <p id="active-reports" class="text-3xl font-bold">8</p>
                                    </div>
                                    <i class="fas fa-flag text-4xl text-red-200"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions Section -->
                        <div class="bg-white p-6 rounded-lg border mb-6">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">Quick Actions</h3>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <button onclick="quickAction('create-announcement')" class="flex flex-col items-center p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors">
                                    <i class="fas fa-bullhorn text-2xl text-blue-600 mb-2"></i>
                                    <span class="text-sm font-medium text-blue-800">Create Announcement</span>
                                </button>
                                <button onclick="quickAction('view-analytics')" class="flex flex-col items-center p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors">
                                    <i class="fas fa-chart-line text-2xl text-green-600 mb-2"></i>
                                    <span class="text-sm font-medium text-green-800">View Analytics</span>
                                </button>
                                <button onclick="quickAction('export-data')" class="flex flex-col items-center p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors">
                                    <i class="fas fa-download text-2xl text-purple-600 mb-2"></i>
                                    <span class="text-sm font-medium text-purple-800">Export Data</span>
                                </button>
                                <button onclick="quickAction('system-health')" class="flex flex-col items-center p-4 bg-orange-50 hover:bg-orange-100 rounded-lg transition-colors">
                                    <i class="fas fa-heartbeat text-2xl text-orange-600 mb-2"></i>
                                    <span class="text-sm font-medium text-orange-800">System Health</span>
                                </button>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="bg-white p-6 rounded-lg border">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">Recent Activity</h3>
                            <div id="recent-activity" class="space-y-3">
                                <!-- Recent activity will be loaded here -->
                                <div class="text-center py-8 text-gray-500">Loading recent activity...</div>
                            </div>
                        </div>
                    </div>

                    <!-- Event Approvals Tab -->
                    <div id="approvals" class="admin-tab-content">
                        <h2 class="text-2xl font-bold mb-6 text-gray-800">Event Approvals</h2>
                        
                        <!-- Event Filters -->
                        <div class="bg-white p-6 rounded-lg mb-6 border shadow-sm">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">Filter & Search Events</h3>
                            
                            <!-- Search Bar -->
                            <div class="mb-4">
                                <label class="text-sm font-medium text-gray-700 mb-2 block">Search Events</label>
                                <input type="text" id="event-search-input" placeholder="Search by event name, organizer, or description..." 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                                <div class="flex flex-col">
                                    <label class="text-sm font-medium text-gray-700 mb-2">Status</label>
                                    <select id="event-status-filter" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                                        <option value="pending">Pending Approvals</option>
                                        <option value="all">All Events</option>
                                        <option value="approved">Approved</option>
                                        <option value="rejected">Rejected</option>
                                        <option value="changes_requested">Changes Requested</option>
                                    </select>
                                </div>
                                <div class="flex flex-col">
                                    <label class="text-sm font-medium text-gray-700 mb-2">Category</label>
                                    <select id="event-category-filter" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                                        <option value="all">All Categories</option>
                                        <option value="workshop">Workshop</option>
                                        <option value="conference">Conference</option>
                                        <option value="seminar">Seminar</option>
                                        <option value="networking">Networking</option>
                                        <option value="social">Social</option>
                                        <option value="music">Music</option>
                                        <option value="sports">Sports</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="flex flex-col">
                                    <label class="text-sm font-medium text-gray-700 mb-2">Date Range</label>
                                    <select id="event-date-filter" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                                        <option value="all">All Dates</option>
                                        <option value="upcoming">Upcoming Events</option>
                                        <option value="this_week">This Week</option>
                                        <option value="this_month">This Month</option>
                                        <option value="next_month">Next Month</option>
                                        <option value="past">Past Events</option>
                                    </select>
                                </div>
                                <div class="flex flex-col">
                                    <label class="text-sm font-medium text-gray-700 mb-2">Created</label>
                                    <select id="event-created-filter" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                                        <option value="all">All Time</option>
                                        <option value="today">Today</option>
                                        <option value="yesterday">Yesterday</option>
                                        <option value="this_week">This Week</option>
                                        <option value="last_week">Last Week</option>
                                        <option value="this_month">This Month</option>
                                    </select>
                                </div>
                                <div class="flex flex-col justify-end">
                                    <button onclick="loadEventApprovals()" class="px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-medium">
                                        <i class="fas fa-sync mr-2"></i>Refresh
                                    </button>
                                </div>
                                <div class="flex flex-col justify-end">
                                    <button onclick="resetEventFilters()" class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium">
                                        <i class="fas fa-refresh mr-2"></i>Reset Filters
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Events List Container -->
                        <div id="approvals-container" class="space-y-4">
                            <div class="text-center py-8 text-gray-500">Loading events...</div>
                        </div>
                    </div>

                    <!-- Deletion Requests Tab -->
                    <div id="deletions" class="admin-tab-content">
                        <h2 class="text-2xl font-bold mb-6 text-gray-800">Event Deletion Requests</h2>
                        
                        <!-- Deletion Filters -->
                        <div class="bg-white p-6 rounded-lg mb-6 border shadow-sm">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">Filter Deletion Requests</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                <div class="flex flex-col">
                                    <label class="text-sm font-medium text-gray-700 mb-2">Status</label>
                                    <select id="deletion-status-filter" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors">
                                        <option value="deletion_requested">Pending Review</option>
                                        <option value="all">All Requests</option>
                                        <option value="deletion_approved">Approved</option>
                                        <option value="deletion_rejected">Rejected</option>
                                    </select>
                                </div>
                                <div class="flex flex-col justify-end">
                                    <button onclick="loadDeletionRequests()" class="px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium">
                                        <i class="fas fa-search mr-2"></i>Manual Refresh
                                    </button>
                                </div>
                                <div class="flex flex-col justify-end">
                                    <button onclick="refreshDeletions()" class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium">
                                        <i class="fas fa-refresh mr-2"></i>Reset Filters
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Deletion Requests List Container -->
                        <div id="deletions-container" class="space-y-4">
                            <div class="text-center py-8 text-gray-500">Loading deletion requests...</div>
                        </div>
                    </div>

                    <!-- User Management Tab -->
                    <div id="users" class="admin-tab-content">
                        <h2 class="text-2xl font-bold mb-6 text-gray-800">User Management</h2>
                        
                        <!-- Search and Filter Bar -->
                        <div class="bg-white p-6 rounded-lg mb-6 border shadow-sm">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">Search & Filter Users</h3>
                            <div class="grid grid-cols-1 lg:grid-cols-12 gap-4">
                                <div class="lg:col-span-6 flex flex-col">
                                    <label class="text-sm font-medium text-gray-700 mb-2">Search Users</label>
                                    <div class="search-container flex-1">
                                        <i class="fas fa-search search-icon"></i>
                                        <input type="text" id="user-search" placeholder="Search by name, username, or email..." 
                                               class="w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                                    </div>
                                </div>
                                <div class="lg:col-span-2 flex flex-col">
                                    <label class="text-sm font-medium text-gray-700 mb-2">Role</label>
                                    <select id="user-role-filter" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                                        <option value="all">All Roles</option>
                                        <option value="user">Users</option>
                                        <option value="organizer">Organizers</option>
                                        <option value="admin">Admins</option>
                                    </select>
                                </div>
                                <div class="lg:col-span-2 flex flex-col">
                                    <label class="text-sm font-medium text-gray-700 mb-2">Status</label>
                                    <select id="user-status-filter" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
                                        <option value="all">All Status</option>
                                        <option value="active">Active</option>
                                        <option value="suspended">Suspended</option>
                                        <option value="banned">Banned</option>
                                        <option value="restricted">Restricted</option>
                                    </select>
                                </div>
                                <div class="lg:col-span-2 flex flex-col justify-end">
                                    <button onclick="clearUserSearch()" class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium">
                                        <i class="fas fa-refresh mr-2"></i>Clear
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Users List Container -->
                        <div id="users-container" class="space-y-4">
                            <div class="text-center py-8 text-gray-500">Loading users...</div>
                        </div>
                    </div>

                    <!-- Reports Panel Tab -->
                    <div id="reports" class="admin-tab-content">
                        <h2 class="text-2xl font-bold mb-6 text-gray-800">Reports Panel</h2>
                        
                        <!-- Report Filters -->
                        <div class="bg-white p-4 rounded-lg mb-6 border">
                            <div class="flex flex-wrap gap-4">
                                <select id="report-status-filter" class="px-3 py-2 border rounded-lg">
                                    <option value="all">All Status</option>
                                    <option value="pending">Pending</option>
                                    <option value="investigating">Investigating</option>
                                    <option value="resolved">Resolved</option>
                                    <option value="dismissed">Dismissed</option>
                                </select>
                                <select id="report-type-filter" class="px-3 py-2 border rounded-lg">
                                    <option value="all">All Types</option>
                                    <option value="event">Event Reports</option>
                                    <option value="user">User Reports</option>
                                    <option value="organizer">Organizer Reports</option>
                                </select>
                                <select id="report-priority-filter" class="px-3 py-2 border rounded-lg">
                                    <option value="all">All Priority</option>
                                    <option value="urgent">Urgent</option>
                                    <option value="high">High</option>
                                    <option value="medium">Medium</option>
                                    <option value="low">Low</option>
                                </select>
                                <button onclick="loadReports()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                    <i class="fas fa-search mr-2"></i>Filter
                                </button>
                            </div>
                        </div>

                        <!-- Reports List -->
                        <div id="reports-container" class="space-y-4">
                            <div class="text-center py-8 text-gray-500">Loading reports...</div>
                        </div>
                    </div>

                    <!-- Category Management Tab -->
                    <div id="categories" class="admin-tab-content">
                        <h2 class="text-2xl font-bold mb-6 text-gray-800">Category Management</h2>
                        
                        <!-- Category Filters -->
                        <div class="bg-white p-4 rounded-lg mb-6 border">
                            <div class="flex flex-wrap gap-4">
                                <select id="category-status-filter" class="px-3 py-2 border rounded-lg">
                                    <option value="pending">Pending</option>
                                    <option value="approved">Approved</option>
                                    <option value="rejected">Rejected</option>
                                    <option value="all">All Status</option>
                                </select>
                                <button onclick="loadCategories()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                    <i class="fas fa-refresh mr-2"></i>Refresh
                                </button>
                            </div>
                        </div>

                        <!-- Categories List -->
                        <div id="categories-container" class="space-y-4">
                            <div class="text-center py-8 text-gray-500">Loading categories...</div>
                        </div>
                    </div>

                    <!-- Accountability Log Tab -->
                    <div id="logs" class="admin-tab-content">
                        <h2 class="text-2xl font-bold mb-6 text-gray-800">Accountability Log</h2>
                        
                        <!-- Log Filters -->
                        <div class="bg-white p-4 rounded-lg mb-6 border">
                            <div class="flex flex-wrap gap-4">
                                <select id="log-admin-filter" class="px-3 py-2 border rounded-lg">
                                    <option value="all">All Admins</option>
                                </select>
                                <select id="log-action-filter" class="px-3 py-2 border rounded-lg">
                                    <option value="all">All Actions</option>
                                    <option value="event_approved">Event Approved</option>
                                    <option value="event_rejected">Event Rejected</option>
                                    <option value="user_banned">User Banned</option>
                                    <option value="user_suspended">User Suspended</option>
                                    <option value="user_warned">User Warned</option>
                                </select>
                                <select id="log-days-filter" class="px-3 py-2 border rounded-lg">
                                    <option value="7">Last 7 days</option>
                                    <option value="30">Last 30 days</option>
                                    <option value="90">Last 90 days</option>
                                </select>
                                <button onclick="loadAdminLogs()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                    <i class="fas fa-search mr-2"></i>Filter
                                </button>
                            </div>
                        </div>

                        <!-- Logs List -->
                        <div id="logs-container" class="space-y-4">
                            <div class="text-center py-8 text-gray-500">Loading logs...</div>
                        </div>
                    </div>

                    <!-- Settings Tab -->
                    <div id="settings" class="admin-tab-content">
                        <h2 class="text-2xl font-bold mb-6 text-gray-800">Platform Settings</h2>
                        <div class="space-y-6">
                            <div class="bg-white p-6 border rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">General Settings</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Platform Name</label>
                                        <input type="text" value="Event Koi?!" class="w-full p-3 border border-gray-300 rounded-lg">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Support Email</label>
                                        <input type="email" value="support@eventkoi.com" class="w-full p-3 border border-gray-300 rounded-lg">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </section>
    </div>
    <script src="js/admin.js"></script>
    <script src="js/script.js"></script>
</body>
</html>
